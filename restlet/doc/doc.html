<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title>PSCP Developer Docs</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="pscp-developer-docs">
<h1 class="title">PSCP Developer Docs</h1>

<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#requirements" id="id1">1&nbsp;&nbsp;&nbsp;Requirements</a></li>
<li><a class="reference internal" href="#dev-environment" id="id2">2&nbsp;&nbsp;&nbsp;Dev Environment</a><ul class="auto-toc">
<li><a class="reference internal" href="#setup" id="id3">2.1&nbsp;&nbsp;&nbsp;Setup</a></li>
<li><a class="reference internal" href="#workflow" id="id4">2.2&nbsp;&nbsp;&nbsp;Workflow</a></li>
<li><a class="reference internal" href="#deployment" id="id5">2.3&nbsp;&nbsp;&nbsp;Deployment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#php-project" id="id6">3&nbsp;&nbsp;&nbsp;PHP Project</a></li>
<li><a class="reference internal" href="#other-thoughts" id="id7">4&nbsp;&nbsp;&nbsp;Other Thoughts</a><ul class="auto-toc">
<li><a class="reference internal" href="#admin-interface" id="id8">4.1&nbsp;&nbsp;&nbsp;Admin Interface</a></li>
<li><a class="reference internal" href="#restlet-php" id="id9">4.2&nbsp;&nbsp;&nbsp;Restlet/PHP</a></li>
<li><a class="reference internal" href="#javascript" id="id10">4.3&nbsp;&nbsp;&nbsp;Javascript</a></li>
<li><a class="reference internal" href="#dao-layer" id="id11">4.4&nbsp;&nbsp;&nbsp;DAO Layer</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="requirements">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Requirements</a></h1>
<ul class="simple">
<li>Java 1.6</li>
<li>Tomcat 5.5</li>
<li>Postgres 8.3</li>
<li>Apache 2.2</li>
<li>PHP (not sure of version, nothing fancy being used though)</li>
<li>PHP Postgres Library (not sure of real name)</li>
</ul>
</div>
<div class="section" id="dev-environment">
<h1><a class="toc-backref" href="#id2">2&nbsp;&nbsp;&nbsp;Dev Environment</a></h1>
<p>Developed using Netbeans IDE, though certainly not required. Netbeans does
support PHP and Java projects along with good javascript and css support.</p>
<p>During development, I also ran on Linux when working at home. There are
no specific blocks to being developed or deployed on Linux.</p>
<p>The Restlet project contains the build files for local deployment and setup
and supports packaging things up for Uday. See below in <a class="reference internal" href="#deployment">Deployment</a>.</p>
<div class="section" id="setup">
<h2><a class="toc-backref" href="#id3">2.1&nbsp;&nbsp;&nbsp;Setup</a></h2>
<p>Check out subversion repository at:</p>
<pre class="literal-block">
svn://jackson/svn/rtisw/trunk/ProductMetaData/webapp.pscp
</pre>
<p>Check the build script and properties for assumptions on postgres login and
password.</p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id4">2.2&nbsp;&nbsp;&nbsp;Workflow</a></h2>
<p>For PHP work, the development cycle is simple - edit, refresh browser, test.</p>
<p>When ready, deploy to testing server (like williamsfork).</p>
<p>For the Restlet work, a similar cycle is used though deployment is slightly
slower and eventually Tomcat will need to be completely cycled (it slowly
'leaks' memory during application reloading).</p>
</div>
<div class="section" id="deployment">
<h2><a class="toc-backref" href="#id5">2.3&nbsp;&nbsp;&nbsp;Deployment</a></h2>
<p>The <cite>build.xml</cite> file in the restlet project contains targets to deploy local
and to Uday.</p>
<p>The main targets used for local deployment are:</p>
<ul class="simple">
<li>deploy-williamsfork (both restlet and php)</li>
<li>php-williamsfork (php only)</li>
<li>postgres-* (database management)</li>
</ul>
<p>For Uday, the <tt class="docutils literal">ftp</tt> target is used. Note the MD5 sums that are printed out
since Uday feels better being able to verify things (and you can convince him
he did something wrong when he argues with you regarding something not working
and insinuating you did not upload the right files or something).</p>
<p>Between the target names, descriptions and contents, the rest of the targets
should be self explanatory.</p>
</div>
</div>
<div class="section" id="php-project">
<h1><a class="toc-backref" href="#id6">3&nbsp;&nbsp;&nbsp;PHP Project</a></h1>
<p>This part of the project was derived from what we were handed initially (the
code from the old PRICIP web site). This uses a home grown (or maybe <cite>obtained
from the internet and modified</cite>) templating type framework to put content
together.</p>
</div>
<div class="section" id="other-thoughts">
<h1><a class="toc-backref" href="#id7">4&nbsp;&nbsp;&nbsp;Other Thoughts</a></h1>
<div class="section" id="admin-interface">
<h2><a class="toc-backref" href="#id8">4.1&nbsp;&nbsp;&nbsp;Admin Interface</a></h2>
<p>The 'admin' interface, while somewhat useful, took a while to develop and
is one of the more complicated aspects of the site, especially because I
thought that various contributers would be using the site and wanted to ensure
secure authentication (at least on the transport side of things) by using
http digest auth. This is problematic since doing digest auth requires access
to the raw password. Passwords are not stored raw in the database, but are
encrypted using two-way encryption which means someone could theoretically
reverse them. A better approach would be to allow a single 'admin' account not
attached to any real user or email (preventing stolen credentials from being
useful elsewhere) and use the existing REST endpoints for admin but driven
by a different client (like a command line or...) and not the complicated
one in use now.</p>
</div>
<div class="section" id="restlet-php">
<h2><a class="toc-backref" href="#id9">4.2&nbsp;&nbsp;&nbsp;Restlet/PHP</a></h2>
<p>The confusing and painful part of this relationship is that content is provided
by both frameworks - static content by PHP and database 'dynamic' content by
the Restlet components using <cite>freemarker</cite> templates. Freemarker, while not
useless, is harder to code in since the template language and syntax coloring
don't go too well together. Therefore, the freemarker generated content is
limited to simple markup and included in the page(s) via AJAX.</p>
</div>
<div class="section" id="javascript">
<h2><a class="toc-backref" href="#id10">4.3&nbsp;&nbsp;&nbsp;Javascript</a></h2>
<p>The Javascript could be rewritten to be simpler. The most complicated aspect
is the 'rich history' - the back and forward button even though the page is not
reloaded. I can't explain how this works here, but it is well documented on the
web in other frameworks, etc.</p>
</div>
<div class="section" id="dao-layer">
<h2><a class="toc-backref" href="#id11">4.4&nbsp;&nbsp;&nbsp;DAO Layer</a></h2>
<p>For better or worse, the DAO layer is homegrown. It is akin to a DAO/DTO/VO
system. Instead of Value Objects with getters and setters, it uses a property
like system with generic row objects. This works well when getting data and
passing it to the template layer, but has drawbacks elsewhere. It was designed
to be reused in other applications, but has not been yet.</p>
<p>Evaluate replacement based on amount of additional work to schema.</p>
</div>
</div>
</div>
</body>
</html>
